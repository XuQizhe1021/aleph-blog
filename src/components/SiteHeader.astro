---
import { siteConfig } from '../site.config';
import { withBase } from '../utils/paths';
---

<header class="site-header">
	<div class="inner">
		<a class="brand" href={withBase('/')}>
			<span class="brand-dot" aria-hidden="true"></span>
			<span class="brand-text">{siteConfig.title}</span>
		</a>
		<nav class="nav" aria-label="主导航">
			{siteConfig.nav.map((item) => (
				<a class="nav-link" href={withBase(item.href)}>
					{item.label}
				</a>
			))}
		</nav>
		<div class="actions">
			<button class="btn" id="theme-toggle" type="button">
				<span class="muted" id="theme-label">主题</span>
			</button>
		</div>
	</div>
	<script is:inline>
		(() => {
			const btn = document.getElementById('theme-toggle');
			const label = document.getElementById('theme-label');
			const key = 'theme';
			const get = () => document.documentElement.dataset.theme || 'light';
			const set = (theme) => {
				document.documentElement.dataset.theme = theme;
				localStorage.setItem(key, theme);
				if (label) label.textContent = theme === 'dark' ? '深色' : '浅色';
			};
			set(get());
			btn?.addEventListener('click', () => set(get() === 'dark' ? 'light' : 'dark'));
		})();
	</script>
</header>

<style>
	.site-header {
		position: sticky;
		top: 0;
		z-index: 100;
		border-bottom: 1px solid var(--border);
		background: color-mix(in oklab, var(--panel-strong), transparent 20%);
		backdrop-filter: blur(16px);
	}

	.inner {
		width: min(1140px, calc(100% - 32px));
		margin: 0 auto;
		height: 62px;
		display: flex;
		align-items: center;
		justify-content: space-between;
		gap: 12px;
	}

	.brand {
		display: inline-flex;
		align-items: center;
		gap: 10px;
		text-decoration: none;
	}

	.brand-dot {
		width: 12px;
		height: 12px;
		border-radius: 999px;
		background: linear-gradient(135deg, var(--accent), var(--accent2));
		box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent), transparent 85%);
	}

	.brand-text {
		font-weight: 650;
		letter-spacing: 0.2px;
	}

	.nav {
		display: flex;
		align-items: center;
		gap: 8px;
		flex-wrap: wrap;
		justify-content: center;
	}

	.nav-link {
		padding: 8px 10px;
		border-radius: 999px;
		color: var(--muted);
		text-decoration: none;
	}

	.nav-link:hover {
		color: var(--text);
		background: color-mix(in oklab, var(--panel-strong), transparent 25%);
		text-decoration: none;
	}

	.actions {
		display: flex;
		align-items: center;
		gap: 8px;
	}
	@media (max-width: 720px) {
		.inner {
			height: auto;
			padding: 10px 0;
			align-items: start;
		}
		.nav {
			width: 100%;
			justify-content: flex-start;
			overflow-x: auto;
			flex-wrap: nowrap;
			-webkit-overflow-scrolling: touch;
			scrollbar-width: none;
		}
		.nav::-webkit-scrollbar {
			display: none;
		}
	}
</style>
